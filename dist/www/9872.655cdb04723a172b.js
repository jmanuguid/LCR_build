"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9872],{9872:(h,c,i)=>{i.r(c),i.d(c,{EditUserPageModule:()=>Z});var l=i(9808),o=i(2382),m=i(8058),u=i(7614),s=i(655),t=i(4893),n=i(8876),f=i(4465),v=i(5219);function b(e,d){if(1&e&&(t.TgZ(0,"span",4),t._uU(1),t.qZA()),2&e){const r=t.oxw();t.xp6(1),t.hij("\xa0-\xa0",r.user.username,"")}}function x(e,d){1&e&&t._uU(0,"This field is invalid")}const y=[{path:"",component:(()=>{class e{constructor(r,a,p,g,T,P){this.activatedRoute=r,this.sqlService=a,this.fb=p,this.toast=g,this.router=T,this.loading=P,this.userForm=this.fb.nonNullable.group({firstName:this.fb.nonNullable.control("",{validators:o.kI.required}),lastName:this.fb.nonNullable.control("",{validators:o.kI.required})})}ngOnInit(){this.initializeUser()}initializeUser(){return(0,s.mG)(this,void 0,void 0,function*(){try{const r=this.activatedRoute.snapshot.params.id,a=yield this.sqlService.table("user").row(r).get();this.user=a,this.userForm.setValue({firstName:a.firstName,lastName:a.lastName})}catch(r){this.toast.presentError(r)}})}onSubmit(){return(0,s.mG)(this,void 0,void 0,function*(){if(!this.userForm.dirty)return void this.router.navigate(["../"],{relativeTo:this.activatedRoute});if(this.userForm.invalid)return this.userForm.markAsDirty(),this.userForm.markAllAsTouched(),void this.userForm.updateValueAndValidity();const r=this.loading.create();try{const a=Object.assign({},this.userForm.getRawValue()),p=this.activatedRoute.snapshot.params.id,g=yield this.sqlService.table("user").row(p).update(a);yield this.router.navigate(["/admin/users",g.id]),yield r.hide()}catch(a){yield r.hide(),this.toast.presentError(a)}})}}return e.\u0275fac=function(r){return new(r||e)(t.Y36(u.gz),t.Y36(n.a),t.Y36(o.qu),t.Y36(f.k),t.Y36(u.F0),t.Y36(v.b))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-edit-user"]],decls:32,vars:2,consts:[[1,"bg-info","border-bottom"],[1,"px-xl-5","px-4"],[1,"d-flex","flex-wrap","align-items-center","px-xl-5","pt-5"],["href","/",1,"d-flex","align-items-center","mb-0","me-auto","text-dark","text-decoration-none","lh-1"],[1,"fs-2-large","text-primary","fw-bold","text-light"],["class","fs-2-large text-primary  fw-bold text-light",4,"ngIf"],[1,"px-xl-5","pt-3","pb-3","d-flex","justify-content-between","align-items-start"],["type","button","routerLink","../",1,"btn","btn-sm","btn-link","d-flex","align-items-center","text-decoration-none","text-info","ps-0","text-light"],[1,"material-icons","fs-3","me-2"],[1,"fs-5"],["novalidate","",1,"px-xl-5","mt-4",3,"formGroup"],[1,"row","g-3"],[1,"col-12"],["for","firstName",1,"form-label","fs-5","mb-1"],["type","text","formControlName","firstName","placeholder","","value","","required","",1,"form-control","py-2","rounded-3"],[1,"invalid-feedback","mt-1","fs-5"],["for","lastName",1,"form-label","fs-5","mb-1"],["type","text","formControlName","lastName","placeholder","","value","","required","",1,"form-control","py-2","rounded-3"],["type","submit",1,"rounded-3","px-4","py-2","btn","btn-info","mt-5",3,"click"],["defaultErrorLabelState",""]],template:function(r,a){1&r&&(t.TgZ(0,"header",0)(1,"div",1)(2,"section",2)(3,"a",3)(4,"span",4),t._uU(5,"Edit profile"),t.qZA(),t.YNc(6,b,2,1,"span",5),t.qZA()(),t.TgZ(7,"section",6)(8,"button",7)(9,"span",8),t._uU(10,"arrow_back"),t.qZA(),t.TgZ(11,"span",9),t._uU(12,"Back"),t.qZA()()()()(),t.TgZ(13,"main",1)(14,"form",10)(15,"div",11)(16,"div",12)(17,"label",13),t._uU(18,"First name"),t.qZA(),t._UZ(19,"input",14),t.TgZ(20,"div",15),t._uU(21,"This field is required"),t.qZA()(),t.TgZ(22,"div",12)(23,"label",16),t._uU(24,"Last name"),t.qZA(),t._UZ(25,"input",17),t.TgZ(26,"div",15),t._uU(27,"This field is required"),t.qZA()()(),t.TgZ(28,"button",18),t.NdJ("click",function(){return a.onSubmit()}),t._uU(29,"Save changes"),t.qZA()()(),t.YNc(30,x,1,0,"ng-template",null,19,t.W1O)),2&r&&(t.xp6(6),t.Q6J("ngIf",a.user),t.xp6(8),t.Q6J("formGroup",a.userForm))},dependencies:[l.O5,o._Y,o.Fj,o.JJ,o.JL,o.Q7,o.sg,o.u,m.YI,u.rH],styles:["form[_ngcontent-%COMP%]{max-width:500px}input[_ngcontent-%COMP%]{min-height:48px}"]}),e})()}];let U=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[u.Bz.forChild(y),u.Bz]}),e})(),Z=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[l.ez,o.u5,o.UX,m.Pc,U]}),e})()},5219:(h,c,i)=>{i.d(c,{b:()=>u});var l=i(4893);let o=(()=>{class s{constructor(){}ngOnInit(){}}return s.\u0275fac=function(n){return new(n||s)},s.\u0275cmp=l.Xpm({type:s,selectors:[["app-loading"]],decls:2,vars:0,consts:[[1,"p-3","loading-dots"]],template:function(n,f){1&n&&(l.TgZ(0,"div",0),l._uU(1,"Please wait"),l.qZA())}}),s})();var m=i(3500);let u=(()=>{class s{constructor(n){this.modalService=n}create(){const n=this.modalService.show(o,{class:"modal-sm",backdrop:"static",keyboard:!1,animated:!1});return Object.assign(Object.assign({},n),{hide:()=>new Promise(f=>{setTimeout(()=>{n.hide(),f()},300)})})}}return s.\u0275fac=function(n){return new(n||s)(l.LFG(m.tT))},s.\u0275prov=l.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})()}}]);